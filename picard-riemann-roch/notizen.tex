\documentclass[a4paper,ngerman,12pt]{scrartcl}

\usepackage[utf8]{inputenc}

\usepackage[ngerman]{babel}

\usepackage{amsmath,amsthm,amssymb,stmaryrd,color,graphicx}
\usepackage{array}
\usepackage[all]{xy}

\usepackage{shadethm}

\usepackage[protrusion=true,expansion=true]{microtype}

\usepackage{lmodern}
\usepackage{tabto}

\usepackage{hyperref}

\setlength{\shadeboxsep}{6pt}
\setlength{\shadeleftshift}{-\shadeboxsep}
\setlength{\shaderightshift}{-\shadeboxsep}

\theoremstyle{definition}
\newshadetheorem{defn}{Definition}[section]
%\newtheorem{defn}{Definition}[section]
\newtheorem{ex}[defn]{Beispiel}

\theoremstyle{plain}

\newshadetheorem{prop}[defn]{Proposition}
\newshadetheorem{fact}[defn]{Fakt}
\newshadetheorem{lemma}[defn]{Lemma}
\newshadetheorem{thm}[defn]{Satz}
\newshadetheorem{cor}[defn]{Korollar}

\theoremstyle{remark}
\newtheorem{rem}[defn]{Bemerkung}
\newtheorem{warning}[defn]{Warnung}

\clubpenalty=10000
\widowpenalty=10000
\displaywidowpenalty=10000

\renewcommand{\AA}{\mathbb{A}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\G}{\mathcal{G}}
\renewcommand{\H}{\mathcal{H}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\J}{\mathcal{J}}
\newcommand{\K}{\mathcal{K}}
\renewcommand{\L}{\mathcal{L}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\op}{\mathrm{op}}
\newcommand{\xra}[1]{\xrightarrow{#1}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\Cat}{\mathrm{Cat}}
\newcommand{\Vect}{\mathrm{Vect}}
\newcommand{\VB}{\mathrm{VB}}
\newcommand{\Id}{\mathrm{Id}}
\newcommand{\Coh}{\mathrm{Coh}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\pt}{\mathrm{pt}}
\newcommand{\Ob}{\operatorname{Ob}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\Pic}{\mathrm{Pic}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\placeholder}{\underline{\ \ }}
\newcommand{\lra}{\longrightarrow}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\Div}{\mathrm{Div}}
\newcommand{\ord}{\operatorname{ord}}
\newcommand{\PD}{\operatorname{PD}}

\begin{document}

\title{Die Picard-Gruppe und \\ der Satz von Riemann--Roch}
\author{Ingo Blechschmidt}
\date{16. Oktober 2014}
\maketitle

\begin{center}\begin{minipage}{0.8\textwidth}
Das sind informale Notizen zum ersten Kapitel von Arnaud Beauvilles Buch
\emph{Complex Algebraic Surfaces}.
\end{minipage}\end{center}

\vspace{-3em}
\renewcommand\contentsname{}
\tableofcontents


\section*{Literatur}

\begin{itemize}
\item Beauville, \emph{Complex Algebraic Surfaces}
\item Griffiths, Harris, \emph{Principles of Algebraic Geometry}
\item Hartshorne, \emph{Algebraic Geometry}
\item Huybrechts, \emph{Complex Geometry}
\item Manin, \emph{Lectures on the K-functor in Algebraic Geometry}
\item Shafarevich (Ed.), \emph{Algebraic Geometry II}
\item The Stacks Project Authors, \emph{Stacks Project}
\item Vakil, \emph{Foundations of Algebraic Geometry}
\end{itemize}


\section{Garbenkohomologie}

Sei~$X$ ein Raum (Schema über~$\CC$ oder komplexe Mannigfaltigkeit). Dann
untersucht man (algebraische bzw. holomorphe) Vektorbündel auf~$X$; zur
Kategorie solcher ist die Kategorie der lokal freien~$\O_X$-Modulgarben äquivalent.\footnote{Die
Äquivalenz wird wie folgt vermittelt: Einem Vektorbündel~$E \to X$ ordnet man
die Garbe seiner algebraischen bzw. holomorphen Schnitte zu. Da man Schnitte
addieren und mit regulären bzw. holomorphen Funktionen multiplizieren kann,
wird die erhaltene Garbe zu einer Garbe von~$\O_X$-Moduln. Die lokale
Trivialität von~$E$ übersetzt sich in die lokale Freiheit der zugehörigen
Garbe. Fasern des Vektorbündels entsprechen Fasern der Garbe (das sind die
Halme, tensoriert mit dem Restklassenkörper an der jeweiligen Stelle).}
Diese ist aber keine abelsche Kategorie und daher kein geeigneter Rahmen, um
Funktoren abzuleiten.

Man behilft sich mit der größeren Kategorie~$\Coh(X)$ der
\emph{kohärenten~$\O_X$-Modulgarben}. Die ist eine volle abelsche Unterkategorie der
abelschen Kategorie aller~$\O_X$-Modulgarben. Im Fall, dass~$X$ ein
lokal noethersches Schema oder eine komplexe Mannigfaltigkeit ist, umfasst
diese Kategorie die Kategorie der lokal freien Garben und ist die kleinste
volle abelsche Unterkategorie mit dieser Eigenschaft. Kohärenz ist eine
Endlichkeitseigenschaft, die im Allgemeinen stärker ist, als von endlichem Typ
zu sein.\footnote{Eine~$\O_X$-Modulgarbe~$\E$ heißt genau dann \emph{kohärent},
wenn sie von endlichem Typ ist und wenn für jede offene Teilmenge~$U \subseteq
X$ der Kern eines jeden~$\O_X|_U$-linearen Morphismus~$(\O_X|_U)^n \to \E|_U$
ebenfalls von endlichem Typ ist. Die Kohärenz von~$\O_X$ für den Fall einer
komplexen Mannigfaltigkeit ist die Aussage des Kohärenzsatzes von Oka.} Die
Faserdimension einer kohärenten Garbe kann -- anders als bei lokal freien
Garben -- von Punkt zu Punkt variieren.

Von zentraler Bedeutung ist der Funktor~$\Gamma(X,\placeholder) : \Coh(X) \to
\Vect(\CC)$, welcher nur linksexakt, aber in allen interessanten Fällen nicht
exakt ist und daher abgeleitet werden muss. Damit definiert man
\emph{Garbenkohomologie}: Die~$n$-te Kohomologie einer kohärenten Garbe~$\E$
ist $H^n(X, \E) := R^n \Gamma(X,\placeholder)(\E)$.\footnote{Das ist etwas
gemogelt. Der Kategorie~$\Coh(X)$ mangelt es im Allgemeinen an genügend
Injektiven, weswegen man zu größeren Kategorien übergeht.}

Gewöhnliche (singuläre) Kohomologie erhält man aus dieser Definition zurück,
wenn man für~$\E$ konstante Garben verwendet.\footnote{Eine Garbe heißt genau
dann \emph{konstant}, wenn sie die Garbifizierung einer konstanten Prägarbe ist
-- einer solchen, die jeder offenen Teilmenge des Raums dieselbe Menge~$A$
zuordnet. Explizit ist die Menge der~$U$-Schnitte einer solchen konstanten Garbe
die Menge der stetigen Funktionen~$U \to A$, wobei~$A$ mit der diskreten
Topologie versehen wird. Konstante Garben sind nicht kohärent -- sie tragen
nicht einmal eine~$\O_X$-Modulstruktur -- durch Übergang von~$\Coh(X)$ zur
Kategorie aller Garben abelscher Gruppen kann man aber auch für solche Garben
Kohomologie erklären.} Im klassischen Fall spielt die Wahl der Koeffizienten
($\ZZ$, $\QQ$, \ldots) dank des universellen Koeffiziententheorems keine große
Rolle; das ist bei Garbenkohomologie nicht so. Garbenkohomologie kann man sich
\emph{nicht} über "`Zykel modulo Ränder"' anschaulich vorstellen, geometrische
Vorstellung ist bedingt aber durch \emph{Čech-Methoden} gegeben.

Garbenkohomologie hat drei für uns sehr wesentliche Eigenschaften~[Vakil,
Hartshorne]:
\begin{enumerate}
\item Falls~$X$ eigentlich über dem Punkt bzw. kompakt ist, so sind
die~$H^n(X,\E)$ \emph{endlichdimensionale} Vektorräume\footnote{Dass das
nicht immer so ist, zeigt schon das Beispiel~$H^0(\AA^1, \O_{\AA^1})$ der
unendlichdimensionale Raum der holomorphen Funktionen auf~$\CC$. Hier und im
Folgenden ist~$\AA^1$ der eindimensionale affine Raum über~$\CC$.} und für~$i > \dim X$
verschwindet die~$i$-ten Kohomologie.
\item Ist~$0 \to \E' \to \E \to \E'' \to 0$ eine kurze exakte Sequenz von
kohärenten Garben, so erhält man eine lange exakte Sequenz in Kohomologie:
\[ \cdots \lra H^n(X,\E') \lra H^n(X,\E) \lra H^n(X,\E'') \lra H^{n+1}(X,\E')
\lra \cdots \]
\item Die \emph{Euler-Charakteristik} einer kohärenten Garbe~$\E$, definiert
als die alternierende Summe~$\chi(\E) := \sum_{n=0}^\infty (-1)^n\, \dim_\CC H^n(X,\E)
\in \ZZ$, ist additiv in kurzen exakten Sequenzen. Deshalb hängt~$\chi(\E)$ nur
von der \emph{Klasse von~$\E$ in der K-Theorie ab}, also nur von
\emph{diskreten Invarianten} von~$\E$.\footnote{Außerdem ist die
Euler-Charakteristik auf flachen Familien von kohärenten Garben
konstant~[Shafarevich, Abschn.~3.8 und~4.1].
Die K-Theorie von~$X$ ist die abelsche Gruppe
formaler~$\ZZ$-Linearkombinationen von Isomorphieklassen von kohärenten Garben
auf~$X$ modulo den Relationen~$\E = \E' + \E''$ für jede kurze exakte
Sequenz~$0 \to \E' \to \E \to \E'' \to 0$.  Die K-Theorie von~$\AA^1$ ist
isomorph zu~$\ZZ$ (mit Isomorphismus~$\E \mapsto \rank\E$), die von~$\PP^n$ ist
isomorph zu~$\ZZ[X]/(X+1)^{n+1}$ [Manin].}
\end{enumerate}


\subsection*{Wieso Garbenkohomologie?}

Ein Grund, Garbenkohomologie statt klassischer Kohomologie zu studieren, ist
schlichtweg der, dass höhere Kohomologie mit Werten in konstanten Garben auf
irreduziblen Schemata stets trivial ist. Das liegt daran, dass auf irreduziblen
topologischen Räumen konstante Garben stets welk (flabby) und daher azyklisch
bezüglich des globale-Schnitte-Funktors sind.

Ein weiterer Grund liegt darin, dass man oft an der Dimension des globalen
Schnitt\-raums einer kohärenten Garbe~$\E$ interessiert ist, also an~$\dim_\CC
H^0(X,\E)$. Diese ist im Allgemeinen aber nicht leicht zu berechnen. Die
Euler-Charakteristik dagegen, in der diese Dimension als ein Summand auftritt,
ist dank ihrer Stabilitätseigenschaften leichter zugänglich. Im Fall, dass~$\E$
das zu einem Divisor~$D$ assoziierte Geradenbündel ist (siehe Abschnitt~2), ist
die Frage nach der Dimension des globalen Schnittraums die sehr konkrete Frage
nach der Dimension des Raums meromorpher Funktionen mit durch~$D$ vorgegebenem
Null- und Polstellenverhalten.

Historisch war auch die \emph{Leray-Spektralsequenz} eine große Motivation,
Garbenkohomologie zu untersuchen. Diese liefert im Kontext einer stetigen
Abbildung~$f : X \to Y$ eine Möglichkeit, aus Kenntnis der (gewöhnlichen)
Kohomologie von~$Y$ und der Kohomologie der Fasern~$f^{-1}[y]$ Rückschlüsse auf die Kohomologie
von~$X$ zu ziehen; dabei kommt unweigerlich Garbenkohomologie vor.\footnote{Nur
im Fall, dass~$f$ eine Faserung ist, kann man noch auf den Speziallfall der
Leray--Serre-Spek\-tral\-sequenz ausweichen, bei der man nur Kohomologie mit Werten
in lokalen Systemen benötigt [Shafarevich, Kap.~1].}

Als letzter Grund sei angeführt, dass Garbenkohomologie geometrische Objekte
klassiziferen kann. Etwa stehen die Elemente von~$H^1(X,\O_X^\times)$ auf
kanonische Art und Weise mit den Geradenbündeln auf~$X$ (bis auf Isomorphie) in
Eins-zu-Eins-Korrespondenz.\footnote{Geradenbündel kann man auch
als~$\GL_1(\O_X)$-Hauptfaserbündel ansehen. Allgemeiner
klassifiziert~$H^1(X,\GL_n(\O_X))$ Vektorbündel vom Rang~$n$
und~$H^1(X,\G)$~$G$-Hauptfaserbündel.}


\subsection*{Die kurze exakte Sequenz zu einem Unterschema}

Im Folgenden werden wir wiederholt die kurze exakte Sequenz zu einem
abgeschlossenen Unterschema~$V \stackrel{i}{\hookrightarrow} X$ bzw. einer
abgeschlossenen Untermannigfaltigkeit benötigen. Diese ist die Sequenz
\[ 0 \lra \J \lra O_X \lra i_*\O_V \lra 0. \]
Dabei ist~$\J$ die \emph{Idealgarbe} zu~$V$, also die Garbe derjenigen
Funktionen, welche auf~$V$ verschwinden. Das Komplement von~$V$ kann daraus als
die offene Menge~$\{ x \in X \,|\, 1 \in \J_x \subseteq \O_{X,x} \}$
wiedergewonnen werden -- das ist die Menge derjenigen Punkte, in denen
mindestens eine definierende Gleichung von~$V$ nicht erfüllt ist.

Die Garbe~$i_* \O_V$ ist der Pushforward der Strukturgarbe von~$V$, also der
Garbe der regulären bzw. holomorphen Funktionen. Auf Punkten~$x \in X$, welche
nicht in~$V$ liegen, ist ihr Halm trivial: $(i_*\O_V)_x = 0$. Für Punkte~$x \in
V$ gilt~$(i_*\O_V)_x \cong \O_{V,x} \cong \O_{X,x}/\J_x$.

\begin{ex}Zum abgeschlossenen Unterschema~$\{0\} \stackrel{i}{\hookrightarrow} \AA^1$ gehört
die exakte Sequenz~$0 \to (z) \to \O_{\AA^1} \to i_*\O_\pt$. Dabei ist~$(z)$ die
Idealgarbe aller~$\O_{\AA^1}$-Vielfachen der Koordinatenfunktion~$z$.\end{ex}

\begin{ex}Zum Schnitt~$V \cap V' \stackrel{j}{\hookrightarrow} X$ zweier
abgeschlossener Unterschema gehört die Idealgarbe~$\J + \J'$. Die vorgedrückte
Strukturgarbe ergibt sich daher als~$j_*\O_{V \cap V'} = \O_X/(\J + \J') \cong
\O_X/\J \otimes_{\O_X} \O_X/\J' \cong i_*\O_V \otimes_{\O_X}
i'_*\O_{V'}$.\end{ex}


\subsection*{Zurück und vor}

Ist~$V \stackrel{i}{\hookrightarrow} X$ eine abgeschlossene Teilmenge, so
definiert der Pushforward-Funktor~$i_*$ eine Äquivalenz zwischen der Kategorie
der Garben auf~$V$ und der Kategorie derjenigen Garben auf~$X$, deren Träger
in~$V$ liegt. Oft ist es hilfreich, auf einem einzigen Raum zu arbeiten; dann
kann man sich also des Pushforward-Funktors bedienen.

Für den Rückzug~$\E|_V := i^* \E$ einer kohärenten Garben~$\E$ auf~$X$ gilt die
Rechenregel
\[ i_* (\E|_V) \cong \E \otimes_{\O_X} i_*\O_V \cong \E \otimes_{\O_X} \O_X/\J,
\]
wenn~$\J$ die Idealgarbe von~$V$ ist. Ferner gilt für die Kohomologie
\[ H^n(V, \F) \cong H^n(X, i_*\F). \]


\subsection*{Normalgarbe und Konormalgarbe}

Ist~$V \hookrightarrow X$ ein abgeschlossenes Unterschema, so ist~$\N_{V/X}^\vee
:= \J/\J^2 \cong \J \otimes_{\O_X} \O_V \cong \J|_V$ die \emph{Konormalgarbe} von~$V$ in~$X$. Sie hat Träger in~$V$ und
wird daher als Garbe auf~$V$ angesehen. Die \emph{Normalgarbe} ist die
zugehörige Dualgarbe.

Wenn~$V$ in~$X$ \emph{regulär eingebettet} ist -- das bedeutet, dass es lokal
Funktionen~$f_1,\ldots,f_r$ gibt, welche die Idealgarbe~$\J$ erzeugen \emph{und
eine reguläre Folge in~$\O_X$ bilden}\footnote{\label{fn:regulaere-folge}Eine Folge~$(f_1,\ldots,f_r)$
von Elementen eines Rings~$A$ heißt genau dann \emph{regulär}, wenn~$f_1$
in~$A$ regulär, $f_2$ in~$A/(f_1)$ regulär, \ldots, $f_r$
in~$A/(f_1,\ldots,f_{r-1})$ regulär ist. Dabei heißt ein Ringelement~$f$
\emph{regulär}, wenn Multiplikation mit~$f$ injektiv ist. Anschaulich ist eine
reguläre Folge von Funktionen eine, in der keine der einzelnen Gleichungen
redundant ist. Etwa ist die Folge~$z, z$ von Elementen von~$\O_{\AA^1}$ nicht
regulär, und in der Tat hat das Verschwindungsschema~$V(z,z)$ dieser Funktionen
auch nicht Kodimension~2.} -- so ist die Konormalgarbe lokal frei
vom Rang~$r$ [Manin,~Prop.~3.4].

Im glatten Fall gibt es die kurze exakte Sequenz~[Vakil,~Thm.~21.3.8]
\[ 0 \lra \N_{V/X}^\vee \lra \Omega_X|_V \lra \Omega_V \lra 0. \]


\section{Divisoren}

Sei~$X$ ein noethersches, reguläres und ganzes Schema über~$\CC$ oder eine
komplexe Mannigfaltigkeit. Es sei~$\K_X$ die Garbe der rationalen bzw.
meromorphen Funktionen auf~$X$. Im Schemafall ist diese einfach die konstante
Garbe mit Faser~$\O_{X,\xi}$.

\begin{defn}\begin{enumerate}
\item Ein \emph{(Weil-)Divisor} auf~$X$ ist eine
formale~$\ZZ$-Linearkombination von irreduziblen Hyperflächen von~$X$. (Das
Achsenkreuz in~$\AA^2$ ist ein Beispiel für eine reduzible Hyperfläche.
Hyperflächen werden lokal durch eine reguläre Gleichung ausgeschnitten.)
\item Der \emph{Grad} eines Divisors ist die Summe seiner Koeffizienten.
\item Ein Divisor~$D$ heißt genau dann \emph{effektiv}, notiert~"`$D \geq 0$"',
wenn seine Koeffizienten alle nichtnegativ sind.
\item Ein Divisor~$D$ heißt genau dann \emph{Hauptdivisor}, wenn er von der
Form~$\div(f)$ für einen globalen Schnitt~$f \in \K_X^\times(X)$ ist. Dabei
ist~$\div(f)$ der \emph{Null- und Polstellendivisor} von~$f$, definiert
als~$\sum_Y \ord_Y(f) \cdot [Y]$. Der Null- und Polstellendivisor der
Nullfunktion ist nicht definiert.
\item Divisoren~$D$ und~$D'$ heißen genau dann zueinander \emph{linear
äquivalent}, geschrieben~"`$D \equiv D'$"', wenn die Differenz~$D - D'$ ein
Hauptdivisor ist.
\end{enumerate}
\end{defn}

\begin{ex}Der Null- und Polstellendivisor der rationalen Funktion~$(x-3)^2
(x-4) / (x-5)^3$ auf~$\AA^1$ ist~$2 \cdot [3] + [4] - 3 \cdot [5]$.\end{ex}

Hauptdivisor zu sein, ist auf~$\AA^1$ keine Einschränkung: Offensichtlich kann
man zu jedem gegebenen Divisor eine rationale Funktion konstruieren, die genau
das gewünschte Null- und Polstellenverhalten zeigt. Auf~$\PP^1$ dagegen, der
riemannschen Zahlenkugel, können nur Divisoren vom Grad~Null Hauptdivisoren
sein. Denn rationale Funktionen auf~$\PP^1$ sind stets von der
Form~$f(x,y)/g(x,y)$ für homogene Polynome~$f$ und~$g$ vom gleichen Grad
und haben daher gleich viele Null- wie Polstellen.

Ist~$s$ ein rationaler Schnitt eines Geradenbündels~$\L$ -- das heißt ein auf
einer offenen dichten Teilmenge definierter Schnitt --, so lässt sich ebenfalls
ein Null- und Polstellendivisor~$\div(s)$ definieren. Denn lokal gibt es einen
Isomorphismus~$\varphi : \L \to \O_X$, und~$\div(\varphi(s))$ ist bereits
erklärt. Andere Wahlen einer lokalen Trivialisierung ändern~$\varphi(s)$ nur um
eine invertierbare Funktion ab und haben daher keine Auswirkung auf den Null-
und Polstellendivisor, weswegen~$\div(s)$ global wohldefiniert ist.

Rationale Funktionen sind dasselbe wie rationale Schnitte des trivialen
Geradenbündels~$\O_X$. Die beiden Definitionen für den Null- und
Polstellendivisor einer rationalen Funktion stimmen miteinander überein.

\begin{warning}Divisoren der Form~$\div(s)$, wobei~$s$ ein rationaler Schnitt
eines Geradenbündels ist, sind trotz des gegenteiligen Anscheins im
Allgemeinen \emph{nicht} Hauptdivisoren.\end{warning}

Tatsächlich zeigt eine Konstruktion, zu der wir gleich kommen werden, dass
\emph{jeder} Divisor der Null- und Polstellendivisor eines geeigneten rationalen Schnitts
eines geeigneten Geradenbündels ist. Das ist in der algebraischen bzw.
holomorphen Welt etwas besonderes (wieso?).


\subsection*{Das assoziierte Bündel zu einem Divisor}

\begin{defn}Sei~$D$ ein Divisor auf~$X$. Dann ist
eine~$\O_X$-Modulgarbe~$\O_X(D)$ für offene Teilmengen~$U \subseteq X$ durch
folgende Setzung definiert. Damit die Nullfunktion ein Schnitt von~$\O_X(D)$
ist, gelte konventionsgemäß~$D + \div(0) \geq 0$.
\[ \Gamma(U, \O_X(D)) := \{ f \in \K_X(U) \,|\, \text{$D + \div(f) \geq 0$
auf~$U$} \} \]
\end{defn}

Positive Anteile in~$D$ erlauben also, dass Schnitte von~$\O_X(D)$ Polstellen
besitzen dürfen; negative Anteile erzwingen Nullstellen. Da~$\O_X(D)$ als
Geradenbündel eine kohärante Garbe ist, ist~$\Gamma(X,\O_X(D)) =
H^0(X,\O_X(D))$ endlichdimensional, und es ist eine interessante Frage, die
Dimension dieses Raums zu bestimmen.

\begin{ex}\label{ex:o-hauptdivisor}
Ist~$D = \div(f_0)$ ein Hauptdivisor, so ist~$\O_X(D)$ vermöge des
Morphismus~$\O_X(D) \to \O_X$, $f \mapsto f f_0$ global isomorph zu~$\O_X$.
(Wieso liegt~$f f_0$ wirklich in~$\O_X$?)\end{ex}

\begin{ex}Sei~$X = \PP^1$ mit den Koordinaten~$x$ und~$y$ und sei~$H = V(x)$.
Dann besitzt~$\O_X(H)$ den globalen Schnitt~$1$. Die Garbe~$\O_X(-H)$ hat nur den
Nullschnitt als globalen Schnitt, denn es gibt keine nichttrivialen rationalen
Funktionen auf~$\PP^1$, welche zwar eine Nullstelle besitzen müssen, aber keine
Pole haben dürfen. Auf der standardoffenen Menge~$D(y)$ besitzt die Garbe~$\O_X(-H)$
den Schnitt~$x/y$ (der Pol bei~$[1:0]$ zählt nicht, da~$[1:0] \not\in D(y)$),
auf~$D(x)$ den Schnitt~$1$.
\end{ex}

Es ist nicht offensichtlich, dass die Modulgarbe~$\O_X(D)$ zu einem Divisor~$D$ lokal
frei ist. Dazu benötigen wir folgendes Faktum:\footnote{Dieses drückt die
Korrespondenz zwischen Weil- und Cartier-Divisoren aus und benötigt zwingend
eine Form von Glattheit. Siehe
\url{http://math.stackexchange.com/questions/651292/what-fails-in-the-cartier-weil-divisor-correspondence-in-the-singular-case}
für ein kurzes Beispiel.}

\begin{fact}[Huybrechts, Prop.~2.3.9]Sei~$D$ ein Divisor. Dann gibt es um jeden Punkt~$x \in X$ eine
offene Umgebung~$U \subseteq X$ und eine rationale Funktion~$f_0 \in \K_X(U)$,
sodass lokal auf~$U$ gilt:~$D = \div(f_0)$.
\end{fact}

\begin{ex}Sei~$H = V(x)$ auf~$\PP^1$. Auf~$D(x)$ gilt~$[H] = \div(1) = 0$,
auf~$D(y)$ gilt~$[H] = \div(x/y)$. Die lokalen Funktionen~$1$ und~$x/y$
besitzen auf~$D(x)$ bzw.~$D(y)$ keine Polstellen; das ist bei effektiven
Divisoren immer so. Ein anderes Beispiel liefert~$-H$: Auf~$D(x)$ gilt~$-[H] =
\div(1)$, auf~$D(y)$ gilt~$-[H] = \div(y/x)$.\end{ex}

Ist~$x \in X$ ein Punkt, so liefert das Faktum eine trivialisierende
Umgebung~$U$ für~$\O_X(D)$: Auf~$U$ gilt~$D = \div(f_0)$, wie in
Beispiel~\ref{ex:o-hauptdivisor} ist daher~$\O_X(D)|_U \to \O_X|_U$, $f \mapsto
f f_0$ ein Isomorphismus.

\begin{defn}Die Menge der Geradenbündel
auf~$X$ modulo Isomorphie, versehen mit dem Tensorprodukt als Gruppenstruktur,
ist die \emph{Picard-Gruppe}~$\Pic(X)$ von~$X$. Die Menge der Divisoren auf~$X$
modulo linearer Äquivalenz, versehen mit der Addition von Divisoren, ist die
\emph{Divisorklassengruppe}~$\Div(X)$ von~$X$.
\end{defn}

\begin{prop}\label{prop:div-pic}Die Zuordnung~$D \mapsto \O_X(D)$ definiert eine
Eins-zu-Eins-Korres\-pon\-denz zwischen Divisoren auf~$X$ und Untergeradenbündeln
von~$\K_X$. Ferner steigt sie zu einer Eins-zu-Eins-Korrespondenz zwischen
den Divisoren auf~$X$ modulo linearer Äquivalenz und den Geradenbündeln
auf~$X$ modulo Isomorphie ab.
\end{prop}
\begin{proof}Ist ein Geradenbündel zusammen mit einer Einbettung~$\L
\hookrightarrow \K_X$ gegeben, so können wir einen Divisor~$D$ als Null- und
Polstellendivisor desjenigen rationalen Schnitts von~$\L$ definieren, welcher
zum Schnitt~$1 \in \K_X$ korrespondiert. Man kann zeigen, dass ein
solcher stets existiert -- dabei geht die Voraussetzung ein, dass~$\L$ ein
Geradenbündel ist.

\emph{Warnung.} Der Null- und Polstellendivisor der rationalen Einsfunktion ist
natürlich stets trivial. Um den geht es hier aber nicht -- es geht um den
Divisor zu einem bestimmten rationalen Schnitt \emph{des Geradenbündels~$\L$}. Dieser war
über den Null- und Polstellendivisor einer zugehörigen rationalen Funktion
\emph{unter einer lokalen Trivialisierung} definiert.

Da~$\O_X(D)$ für Hauptdivisoren~$D$ trivial ist
(Beispiel~\ref{ex:o-hauptdivisor}), steigt die Korrespondenz ab. Man kann
zeigen, dass unter unseren Voraussetzungen an~$X$ jedes Geradenbündel auf
unkanonische Art und Weise eine Untergarbe von~$\K_X$ ist.
\end{proof}

\begin{lemma}Für Divisoren~$D$ und~$D'$ gilt~$\O_X(D + D') \cong \O_X(D)
\otimes_{\O_X} \O_X(D')$ auf kanonische Art und Weise. Außerdem gilt~$\O_X(-D)
\cong \O_X(D)^\vee$.\end{lemma}
\begin{proof}Übungsaufgabe.
\end{proof}


\subsection*{Der Träger eines effektiven Divisors}

Ist~$D$ ein effektiver Divisor, so ist~$\O_X(-D)$ auf kanonische Art
und Weise eine Untergarbe von~$\O_X$.\footnote{Die Inklusion~$\O_X(-D) \to
\O_X$ bleibt auf faserniveau~$\O_X(-D)|_x \to \O_X|_x$ nicht unbedingt für alle
Punkte~$x$ injektiv. Man sollte sich hier also nicht ein Unterbündel eines 
Geradenbündels vorstellen. Tatsächlich ist die Inklusion für Punkte~$x \in V = V(\O_X(-D))$
auf faserniveau die Nullabbildung: Denn eine Funktion aus~$\O_X(-D)$ muss ja längs~$V$
verschwinden, die Äquivalenzklasse~$[f]$ einer solchen Funktion~$f$ wird also
auf~$f(x) = 0$ geschickt. \emph{Punkte sind nicht flach!}}
Das gibt Anlass zur kurzen exakten Sequenz
\[ 0 \lra \O_X(-D) \lra \O_X \lra i_*\O_V \lra 0, \]
die ein abgeschlossenes Unterschema~$V := V(\O_X(-D))$ definiert -- die Vereinigung
der in~$D$ vorkommenden Hyperflächen. Dieses (oder seine Reduktion) heißt
\emph{Träger} von~$D$.

\begin{ex}Die Idealgarbe zu einem einpunktigen Unterschema in~$\PP^1$ ist durch
Serres Twistingbündel~$\O(-1)$ gegeben. Die Idealgarbe einer Hyperfläche,
welche durch eine homogene Gleichung vom Grad~$d$ ausgeschnitten wird,
ist~$\O(-d)$.
\end{ex}

Für den Spezialfall, dass~$D$ aus nur einer irreduziblen Kurve~$C$ mit
einfacher Wertung besteht, zeigt diese Sequenz, dass die Konormalgarbe von~$C$
in~$X$ durch~$\O_X(-C)|_C$ gegeben ist. Das ist auch anschaulich plausibel: XXX


\subsection*{Divisoren auf~$\PP^n$}

Sei~$H$ eine Hyperebene in~$\PP^n$.

\begin{prop}Der Homomorphismus~$\ZZ \to \Div(\PP^n)$, $m \mapsto \O_{\PP^n}(mH)$ ist
ein Isomorphismus.\end{prop}
\begin{proof}Übungsaufgabe.\end{proof}

Das Bündel~$\O_{\PP^n}(mH)$ ist isomorph zu Serres Twistinggarbe~$\O(m)$. Ist etwa~$H =
V(x_0)$, so ist ein Isomorphismus durch~$f \mapsto x_0^m f$ gegeben.


\subsection*{Divisoren auf~$\PP^1 \times \PP^1$}

XXX


\section{Der Satz von Riemann--Roch für Kurven}

\begin{fact}Der Grad eines Hauptdivisors auf einer \emph{kompakten} Kurve ist
stets Null.\end{fact}

\begin{defn}Der \emph{Grad} eines Geradenbündels~$\L$ auf einer kompakten Kurve
ist der Grad eines Divisors~$D$ mit~$\L \cong \O_X(D)$.\end{defn}

Dank Proposition~\ref{prop:div-pic} und des Faktums ist diese Setzung
wohldefiniert. Anschaulich ist der Grad eines Geradenbündels die Anzahl der
Null- und Polstellen (entsprechend gewichtet), die jeder nichttriviale rationale
Schnitt von~$\L$ hat. Es ist bemerkenswert, dass alle nichttrivialen rationalen
Schnitte tatsächlich dasselbe Null- und Polstellenverhalten zeigen.

\begin{ex}Der Grad von Serres Twistinggarbe~$\O(m)$ auf~$\PP^1$
ist~$m$.\end{ex}

\begin{ex}Für jedes Geradenbündel~$\L$ auf einer kompakten Kurve gilt
$\deg\L^\vee = -\deg\L$.\end{ex}

\begin{rem}Den Grad eines Vektorbündels~$\L$ auf einer kompakten Kurve~$X$ kann
man auch rein topologisch beschreiben. Ist~$c_1(\L) \in H^2(X, \ZZ)$, so
gilt~$\deg\L = \int_X c_1(\L)$. (XXX Quelle)\end{rem}

Im ersten Abschnitt wurde versprochen, dass die Euler-Charakteristik einer
kohärenten Garbe nur von diskreten Invarianten der Garbe abhänge und daher
leicht zu berechnen sei. Für den Fall von Geradenbündeln auf Kurven löst der
Satz von Riemann--Roch dieses Versprechen ein:

\begin{thm}[Riemann--Roch für Kurven]
Sei~$X$ eine kompakte Kurve und~$\L$ ein Geradenbündel auf~$X$. Dann gilt
$\chi(\L) = \chi(\O_X) + \deg\L$.
\end{thm}

Ravi Vakil bezeichnet diese Formulierung als \emph{Baby-Variante} von Riemann--Roch, da
in~$\chi(\L)$ noch der schlecht zugängliche Summand~$\dim H^1(X,\L)$ vorkommt.
Mit \emph{Serre-Dualität} kann man diesen noch zu~$\dim H^0(X,\Omega^1_X
\otimes \L^\vee)$ umschreiben, sodass nur noch
nullte Kohomologie vorkommt:
\[ h^0(\L) - h^0(\Omega^1_X \otimes \L^\vee) = 1-g(X) + \deg\L. \]
Dabei haben wir auch die Euler-Charakteristik der Strukturgarbe durch das
Geschlecht von~$X$ ausgedrückt.

\begin{proof}[Beweis des Satzes]Wegen Proposition~\ref{prop:div-pic} genügt es, die Behauptung für
Geradenbündel der Form~$\L = \O_X(D)$ nachzuweisen, also~$\deg D = \chi(\O_X(D))
- \chi(\O_X)$ nachzurechnen. Für den trivialen Divisor~$D = 0$ ist das klar.

Gelte für zwei Divisoren~$D$ und~$D'$ die Beziehung~$D = D' + [P]$, wobei~$P$
ein Punkt auf~$X$ ist. Zum Unterschema~$P \subseteq X$ gibt es die kurze exakte
Sequenz
\[ 0 \lra \O_X(-P) \lra O \lra \O_P \lra 0. \]
Dabei ist~$\O_P$ eine im Punkt~$P$ konzentrierte Wolkenkratzergarbe; dort hat
sie den Halm~$\CC$. (Eigentlich sollten wir~$i_* \O_P$ schreiben, wobei~$i : P
\hookrightarrow X$ die Einbettung ist.) Nach Tensorieren mit~$\O_X(D)$ erhalten
wir die Sequenz
\[ 0 \lra \O_X(D-P) \lra \O_X(D) \lra \O_P \lra 0, \]
welche immer noch exakt ist, da Tensorieren mit lokal freien Garben Exaktheit
erhält. Der rechte Term sollte eigentlich~$\O_P \otimes_{\O_X} \O_X(D)$ sein,
aber da~$\O_P$ nur Träger auf~$P$ hat und~$\O_X(D)$ auf einer Umgebung von~$P$
frei ist, gilt~$\O_P \otimes_{\O_X} \O_X(D) \cong \O_P \otimes_{\O_X} \O_X
\cong \O_P$. Wegen der Additivität der Euler-Charakteristik folgt
\begin{align*}
  \deg D - \chi(\O_X(D)) + \chi(\O_X)
  &= (\deg D' + 1) - \chi(\O_X(D')) - \chi(\O_P) + \chi(\O_X) \\
  &= \deg D' - \chi(\O_X(D')) + \chi(\O_X),
\end{align*}
also gilt die Behauptung genau dann für~$D$, wenn sie für~$D'$ gilt. In die
Rechnung ging~$\chi(\O_P) = 1$ ein -- als Wolkenkratzergarbe
hat~$\O_P$ nur Kohomologie in Dimension~Null.

Da jeder Divisor aus dem trivialen Divisor durch eine endliche Anzahl von
Additionen und Subtraktionen von Punkten entsteht, ist der Beweis vollständig.
\end{proof}


\section{Die Schnittform auf der Picard-Gruppe}

Sei~$X$ eine kompakte Fläche (projektive Varietät über~$\CC$ oder
kompakte komplexe Mannigfaltigkeit der komplexen Dimension~2).

\begin{defn}Seien~$C$ und~$C'$ Kurven auf~$X$ in allgemeiner Lage. Die
\emph{Schnittmultiplizität} von~$C$ und~$C'$ bei einem Punkt~$x \in X$ ist
\[ m_x(C,C') := \dim_\CC \O_{C \cap C',x} = \dim_\CC \O_{X,x}/(f,g), \]
wenn~$f$ und~$g$ lokale Gleichungen (das heißt lokale Erzeuger der jeweiligen
Idealgarben) für~$C$ bzw.~$C'$ sind.
\end{defn}

\emph{Allgemeine Lage} bedeutet: Um jeden Punkt gibt es eine offene Umgebung
mit lokalen Gleichungen~$f$ und~$g$ auf dieser Umgebung, sodass~$(f,g)$ eine
reguläre Folge in~$\O_X$ ist (siehe Fußnote~\ref{fn:regulaere-folge}). Diese
Bedingung garantiert, dass der Schnitt~$C \cap C'$ Kodimension~2, also
Dimension~0 hat und daher aus isolierten Punkten besteht.

XXX Transversalität impliziert allgemeine Lage.

\begin{ex}Sei~$X = \AA^2$ (noch benötigen wir keine Kompaktheit). Sei~$C = V(y)$
und~$C' = V(y-x^2)$. Trotz des tangentialen Anschmiegverhaltens beim Ursprung
befinden sich~$C$ und~$C'$ in allgemeiner Lage. Die Schnittmultiplizität beim
Ursprung ist
\[ m_0(C,C') = \dim_\CC \CC\{x,y\}/(y,y-x^2) = \dim_\CC \CC[x]/(x^2) =
2. \]\end{ex}

\begin{rem}Wer \emph{glatte} Schnitttheorie schon kennt, erwartet vielleicht geeignete
Vorzeichen in der Definition der Schnittmultiplizität und hätte beim vorherigen
Beispiel eher das Ergebnis~Null (zwei Nullstellen mit unterschiedlichen
Vorzeichen) erwartet. Solche Vorzeichen gibt es in der algebraischen bzw.
holomorphen Welt aber nicht.
\end{rem}

\begin{ex}Seien~$C$ und~$C'$ Kurven in allgemeiner Lage und~$x$ ein Punkt, der
nicht im Schnitt liegt. Seien~$f$ bzw.~$g$ lokale Gleichungen. Dann gilt~$f(x)
\neq 0$ oder~$g(x) \neq 0$, also ist~$f$ oder~$g$ in~$\O_{X,x}$ invertierbar.
Somit ist~$m_x(C,C') = \dim_\CC \O_{X,x}/(f,g) = \dim_\CC \O_{X,x}/(1) =
0$.\end{ex}

\begin{ex}Seien~$C$ und~$C'$ Kurven in allgemeiner Lage und~$x$ ein Punkt des
Schnitts. Seien~$f$ bzw.~$g$ lokale Gleichungen. Dann ist die
Schnittmultiplizität genau dann Eins, wenn~$f$ und~$g$ das maximale Ideal
von~$\O_{X,x}$ -- das Ideal derjenigen Funktionskeime, welche bei~$x$
Null sind -- erzeugen.

Sei konkret etwa~$X = \AA^2$ (noch benötigen wir keine
Kompaktheit), $C = V(x)$ und~$C' = V(y)$. Dann ist die Schnittmultiplizität
beim Ursprung Eins. Und in der Tat: Ist~$h$ ein Funktionskeim am
Ursprung mit~$h(0) = 0$, so lässt sich~$h$ in der Form~$ax + by$ mit geeigneten
weiteren Funktionskeimen~$a$ und~$b$ schreiben.

Ist dagegen~$C = V(x)$ und~$C' = V(x - y^2)$, so ist die
Schnittmultiplizität~$2$. Und tatsächlich lässt sich der beim Ursprung
verschwindende Funktionskeim~$y$ \emph{nicht} als Linearkombination von~$x$
und~$x-y^2$ ausdrücken.
\end{ex}

\begin{defn}Seien~$C$ und~$C'$ Kurven auf~$X$, nicht notwendigerweise in
allgemeiner Lage. Dann ist ihre \emph{Schnittzahl} die Zahl
\[ (C \cdot C') := \chi(\O_C \otimes_{\O_X}^{\mathbb{L}} \O_{C'}) :=
  \sum_{n = 0}^\infty (-1)^n \, \chi(\mathcal{T}\!\mathrm{or}^{\O_X}_n(\O_C,\O_{C'})) \in \ZZ. \]
\end{defn}

Dabei verwenden wir das \emph{abgeleitete Tensorprodukt} -- ein Komplex von
Garben, dessen Kohomologie die Tor-Gruppengarben berechnet. Dieser selbst ist als
Komplex von Garben nicht wohldefiniert, aber seine Homologiegarben ("`Kern
modulo Bild"') sind es schon; daher ist auch die Euler-Charakteristik
wohldefiniert.\footnote{Die Euler-Charakteristik eines Komplexes~$\E^\bullet$
ist~$\chi(\E^\bullet) := \sum_{n \in \ZZ} (-1)^n \,\chi(\E^n)$. Es ist eine
nette Übungsaufgabe, die Identität~$\chi(\E^\bullet) = \sum_n (-1)^n
\,\chi(\H^n(\E^\bullet))$ zu bestätigen. Diese bezeugt, dass die
Euler-Charakteristik eines Komplexes nur von dessen Kohomologie abhängt.}

Im Fall, dass~$C$ und~$C'$ in allgemeiner Lage sind, kann man zeigen, dass das
gewöhnliche Tensorprodukt genügt, die höheren Tor-Terme also
verschwinden.\footnote{Zur Berechnung des abgeleiteten Tensorprodukts muss man
einen der beiden Faktoren flach auflösen. Eine geeignete Auflösung von~$\O_C$
ist~$0 \to \O_X(-C) \to \O_X \to \O_C \to 0$; das ist sogar eine lokal freie
Auflösung. Wenn~$f$ eine lokale Gleichung für~$C$ ist und diese auch noch
regulär ist, sodass~$\O_X(-C) = (f)$ isomorph zu~$\O_X$ ist, hat man also die
Auflösung~$0 \to \O_X \stackrel{f}{\to} \O_X \to \O_C \to 0$. Das abgeleitete
Tensorprodukt ist daher der Komplex~$0 \to \O_{C'} \stackrel{f}{\to} \O_{C'}
\to 0$. Dessen Homologie in Grad~$-1$ ist Null, denn wegen der Voraussetzung
der allgemeinen Lage ist~$f$ auch noch in~$\O_{C'}$ regulär. Die Homologie in
Grad~$0$ ist~$\O_{C'}/(f) \cong \O_{C'} \otimes_{\O_X} \O_C$.}
In diesem Fall gilt
\[ (C \cdot C') = \chi(\O_C \otimes_{\O_X} \O_{C'}) = \chi(\O_{C \cap C'}) =
  \sum_{x \in C \cap C'} \dim_\CC \O_{C \cap C',x} =
  \sum_{x \in C \cap C'} m_x(C,C'). \]
In diesem Fall ist die Schnittzahl also auch nichtnegativ. Im allgemeinen Fall
muss das nicht unbedingt sein, dazu werden wir Beispiele sehen. Die Kompaktheit
von~$X$ geht insofern ein, als dass wir die Euler-Charakteristik kohärenter
Garben verwenden. Damit diese wohldefiniert ist, muss die Garbenkohomologie
endlichdimensional sein.

\begin{defn}Für Geradenbündel~$\E$ und~$\F$ auf~$X$ ist die \emph{Schnittzahl}
die Zahl
\[ (\E \cdot \F) :=
  \chi((\O_X - \E^\vee) \cdot (\O_X - \F^\vee)) :=
  \chi(\O_X) - \chi(\E^\vee) - \chi(\F^\vee) + \chi(\E^\vee \otimes_{\O_X}
  \F^\vee). \]
\end{defn}
Der mittlere Ausdruck ist dabei als formale Rechnung in der K-Theorie von~$X$
zu verstehen. Offensichtlich hängt die Schnittzahl nur von den
Isomorphieklassen von~$\E$ und~$\F$ ab, weswegen sie zu einer
\emph{Schnittform} auf der Picard-Gruppe absteigt.

\begin{prop}\begin{enumerate}
\item Seien~$C$ und~$C'$ Kurven auf~$X$. Dann ist~$(\O_X(C) \cdot \O_X(C')) = (C
\cdot C')$.
\item Sei~$C$ eine Kurve und~$\L$ ein Geradenbündel auf~$X$. Dann ist~$(\O_X(C)
\cdot \L) = \deg(\L|_C)$.
\item Die Schnittzahl definiert eine symmetrische und bilineare Abbildung
$\Pic(X) \times \Pic(X) \to \ZZ$.
\end{enumerate}\end{prop}

Aus der ersten Teilaussage folgt insbesondere, dass die Schnittzahl nur von der
linearen Äquivalenzklasse der beteiligten Kurven abhängt -- denn für~$C \equiv
\widetilde C$ gilt~$\O_X(C) \cong \O_X(\widetilde C)$. Es ist auch
bemerkenswert, dass man die Schnittzahl ganz ohne Rückgriff auf Torsionsgarben
nur mit Geradenbündeln beschreiben kann.

\begin{proof}
\begin{enumerate}
\item Die erste Aussage folgt sofort mit den kurzen exakten Sequenzen zu den
Unterschemata~$C$ und~$C'$: In~$K$-Theorie gilt~$\O_C = \O_X - \O_X(-C)$ und
analog für~$C'$.
\item Aus der kurzen exakten Sequenz~$0 \to \O_X(-C) \to \O_X \to \O_C \to 0$
ergibt sich durch Tensorieren mit~$\L^\vee$ die exakte Sequenz
\[ 0 \lra \L^\vee \otimes \O_X(-C) \lra \L^\vee \lra \L^\vee \otimes \O_C \lra 0. \]
Dabei sollten wir eigentlich~$i_* \O_C$ schreiben und die Tensorprodukte mit
dem Grundring~$\O_X$ dekorieren. Jedenfalls folgt
\begin{align*}
  (\O_X(C) \cdot \L)
  &= \chi(\O) - \chi(\O_X(-C)) - \chi(\L^\vee) + \chi(\O_X(-C) \otimes \L^\vee) \\
  &= \chi(\O_C) - \chi(\L^\vee \otimes \O_C) \\
  &= \chi(\O_C) - \chi(\L^\vee|_C) \\
  &= -\deg \L^\vee|_C \\
  &= \deg \L|_C.
\end{align*}
Beim Schritt, wo der Grad ins Spiel kommt, haben wir den Satz von Riemann--Roch
für die Kurve~$C$ verwendet. Im nächsten Schritt haben wir Dualisieren mit
Rückzug auf~$C$ vertauscht -- das ist für lokal freie Modulgarben in Ordnung.
\item Die Symmetrie ist offensichtlich. Die Bilinearität ist nichttrivial und
benötigt, neben etwas Rechnerei, ein Resultat von Serre~[Beauville, Seite~4]. \qedhere
\end{enumerate}
\end{proof}


\subsection*{Selbstschnitte}

Das Extrembeispiel für Schnitte von Kurven, die nicht in allgemeiner Lage sind,
sind \emph{Selbstschnitte}.

\begin{ex}Sei~$H$ eine Hyperebene in~$\PP^2$, also eine Gerade. Um den
Selbstschnitt~$(H \cdot H)$ zu bestimmen, betrachten wir eine weitere
Gerade~$H'$, die~$H$ in genau einem Punkt schneidet. Da je zwei Hyperflächen
desselben Grads auf~$\PP^2$ linear äquivalent sind, gilt~$(H \cdot H) = (H \cdot H') = 1$.
Das folgt natürlich auch sofort mit dem Satz von Bézout.
\end{ex}

\begin{prop}Sei~$C$ eine Kurve in~$X$. Dann gilt
\[ (C \cdot C) = \chi(\O_C) - \chi(\O_X(-C)|_C) \stackrel{\mathrm{RR}}{=}
  \deg \O_X(C)|_C. \]
\end{prop}
\begin{proof}
Zur Auflösung von~$\O_C$ verwenden wir die kurze exakte Sequenz
\[ 0 \lra \O_X(-C) \lra \O_X \lra \O_C \lra 0. \]
Ein Komplex zur Berechnung des abgeleiteten Tensorprodukts ist daher
\[ 0 \lra \O_X(-C) \otimes_{\O_X} \O_C \stackrel{0}{\lra} \O_X \otimes \O_C \lra 0. \]
Das Differential ist Null (bedenke~$\O_C \cong \O_X/\O_X(-C)$). Daher ist der
Selbstschnitt gleich
\[ (C \cdot C) = \chi(\O_X \otimes \O_C) - \chi(\O_X(-C) \otimes_{\O_X} \O_C)
  = \chi(\O_C) - \chi(\O_X(-C)|_C). \qedhere \]
\end{proof}

Die Proposition wird anschaulicher, wenn man sie allgemeinert.

\begin{prop}Sei~$X$ von Dimension~$2n$. Sei~$C$ in~$X$ regulär eingebettet und
von Kodimension~$n$. Sei~$\N_{C/X}^\vee$ das
Konormalenbündel. Dann ist
\[ (C \cdot C) = \chi(\Lambda^\bullet_{\O_C} \N_{C/X}^\vee). \]
\end{prop}

Im Spezialfall, dass~$C$ eine Kurve auf einer Fläche~$X$ ist, ist das
Konormalenbündel durch~$\O_X(-C)|_C$ gegeben und die einzigen nichttrivialen
äußeren Potenzen sind~$\Lambda^0$ und~$\Lambda^1$. So erhält man aus der
allgemeinen Proposition die spezielle zurück.

\begin{proof}Ist lokal~$f_1,\ldots,f_n$ eine reguläre Folge von
Funktionen, welche die Idealgarbe~$\J$ von~$C$ erzeugen, so liefert der
\emph{Koszul-Komplex} eine freie Auflösung von~$\O_C$. Im Spezialfall~$n = 1$
hat dieser die Form
\[ 0 \lra \O_X \stackrel{f_1} \lra \O_X \lra \O_C \lra 0, \]
im Fall~$n = 2$ die Form
\[ 0 \lra \O_X \stackrel{(\begin{smallmatrix}f_1&-f_2\end{smallmatrix})} \lra \O_X^2
  \stackrel{\bigl(\begin{smallmatrix}f_1\\f_2\end{smallmatrix}\bigr)}{\lra} \O_X \lra \O_C \lra 0,
  \]
und allgemein ist er über äußere Potenzen von~$\O_X^n$ gegeben. Die Differentiale
sind unter den Standardbasen durch Matrizen gegeben, deren Einträge nur
die Funktionen~$f_i$ (mit Vorfaktoren aus~$\{-1,0,1\}$) sind. Einen zur
Berechnung des in der Definition von~$(C \cdot C)$ auftretenden abgeleiteten
Tensorprodukts Komplex erhalten wir durch Tensorieren der Auflösung mit~$\O_C
\cong \O_X/\J$. Dabei werden die Differentiale alle zu Null, und wir erhalten
den Komplex~$\Lambda^\bullet_{\O_X} \O_X^n \otimes_{\O_X} \O_X/\J \cong
\Lambda^\bullet_{\O_X/\J} (\O_X/\J)^n \cong
\Lambda^\bullet_{\O_C}(\J/\J^2) = \Lambda^\bullet_{\O_C}
\N_{C/X}^\vee$.\footnote{Ein Isomorphismus~$(\O_X/\J)^n \to \J/\J^2$ ist
durch~$([g_1],\ldots,[g_n]) \mapsto [\sum_i g_i f_i]$ gegeben.}
Der resultierende Isomorphismus~$\mathcal{T}\!or^{\O_X}_i(\O_C,\O_C) \to \Lambda^i_{\O_C}
\N_{C/X}^\vee$ hängt nicht von der Wahl der regulären Folge ab. Daher erhalten
wir diesen Isomorphismus auch auf globaler Ebene. [Manin, Thm.~3.5]
\end{proof}

\emph{Der Selbstschnitt einer Kurve~$C$ kann negativ sein.} Das drückt aus, dass
die Kurve nicht algebraisch bzw. holomorph zu einer linear äquivalenten
Kurve~$C'$ bewegt werden kann, welche zu~$C$ allgemeine Lage hat -- denn der
Schnitt zweier Kurven in allgemeiner Lage ist stets nichtnegativ. In der
glatten Welt sind solche Bewegungen immer möglich, ein negativer Selbstschnitt
liegt dann an negativen Indizes.

In der glatten Welt kann man sich die Formel für den Selbstschnitt auch wie
folgt anschaulich klarmachen. Um die Kurve~$C$ in~$X$ zu deformieren, können
wir sie in Normalenrichtung bewegen: Ist~$s$ ein Schnitt des Normalenbündels,
so bewegen wir in einer Tubenumgebung einen Punkt~$x$ der Kurve zu~$x + s(x)$.
Die entstehende Kurve~$C'$ wird die Kurve~$C$ in genau den Stellen schneiden,
an denen~$s$ Null ist. Die Anzahl dieser Nullstellen ist gerade der Grad des
Normalenbündels.\footnote{Siehe den Kommentar von Donu Arapura und die Antwort
von Daniel Litt auf
\url{http://mathoverflow.net/questions/111464/self-intersection-and-the-normal-bundle}.}

\begin{ex}Sei~$X$ die Aufblasung der projektiven Ebene an einem Punkt und~$E$
der exzeptionelle Divisor in~$X$. Dann ist~$E$ isomorph zu~$\PP(\N)$, der
Projektivierung des Normalenbündels des Punkts in~$\PP^2$; und das Konormalenbündel
von~$E$ in~$X$ ist unter dieser Korrespondenz Serres
Twistingbündel~$\O(1)$.\footnote{Sei~$Y \hookrightarrow X$ ein abgeschlossenes
Unterschema. Dann sind die Grundtatsachen über die Aufblasung~$X' \to X$
und den exzeptionellen Divisor~$Y' \hookrightarrow X'$ (das ist das Urbild
von~$Y$ unter~$X' \to X$) folgende. (1)~Der eingeschränkte Morphismus~$X'
\setminus Y' \to X \setminus Y$ ist ein Isomorphismus. (2)~$Y' \to Y$ ist
isomorph zu~$\PP(\N_{Y/X}) \to Y$. (3)~Die Einbettung $Y' \hookrightarrow X'$
ist regulär von Kodimension~Eins mit Konormalgarbe~$\N_{Y'/X'}^\vee \cong
\O_{\PP(\N_{Y/X})}(1)$. Diese drei Fakten werden etwa in~[Manin, Prop.~12.2]
erläutert und bewiesen. Außerdem wichtig ist:
(4)~Die Aufblasung~$X' \to X$ ist die universelle
(finale) Art und Weise, das Unterschema~$Y$ zu einem Unterschema zu machen, das regulär
von Kodimension~Eins ist~[Stacks,
\href{http://stacks.math.columbia.edu/tag/0806}{Tag~0806}].} Daher ist
$(E \cdot E) = \deg \O(1)^\vee = \deg \O(-1) = -1$.
\end{ex}


\subsection*{Topologische Beschreibung der Schnittzahl}

Die Schnittzahl lässt sich auch rein topologisch, ohne Rückgriff auf
die algebraische bzw. holomorphe Struktur, beschreiben. Dazu sei an ein Faktum
über die erste Chernklasse erinnert:

\begin{fact}[Griffiths/Harris, Seite~141]Ist~$i : C \hookrightarrow X$ die
Einbettung einer Kurve, so gilt~$\int_X c_1(\O_X(C)) \cup \beta = \int_C
i^*(\beta)$ für alle~$\beta \in H^2(X,\ZZ)$.
\end{fact}

Daher folgt für Kurven~$C$ und~$C'$ auf~$X$ (mit~$i : C \hookrightarrow X$)
\begin{align*}
  (C \cdot C')_{\text{top.}}
  &:= \int_X \PD(C) \cup \PD(C')
  = \int_X c_1(\O_X(C)) \cup c_1(\O_X(C')) \\[0.5em]
  &\phantom{:}= \int_C i^*(c_1(\O_X(C')))
  = \int_C c_1(i^*\O_X(C'))
  = \int_C c_1(\O_X(C')|_C) \\[0.5em]
  &\phantom{:}= \deg \O_X(C')|_C
  = (C \cdot C').
\end{align*}


\section{Der Satz von Riemann--Roch für Flächen}

Sei~$X$ eine kompakte Fläche (projektive Varietät über~$\CC$ oder kompakte
komplexe Mannigfaltigkeit der komplexen Dimension~2). Sei~$\omega_X :=
\Lambda^2 \Omega^1_X$ das Bündel der Differentialformen im Topgrad. Ein
Divisor~$K_X$ mit~$\O_X(K_X) \cong \omega_X$ (ein solcher ist bis auf lineare
Äquivalenz eindeutig bestimmt) heißt auch \emph{kanonischer Divisor}.

\begin{ex}Auf~$X = \PP^1$ mit Koordinaten~$x$ und~$y$ (noch ist die Dimension
nicht wichtig) gilt~$\omega_X \cong \O(-2)$. Das kann man schnell einsehen,
wenn man den Null- und Polstellendivisor eines beliebigen nichttrivialen
rationalen Schnitts von~$\omega_X$ betrachtet: Ein solcher ist
beispielsweise~$d(x/y)$. Wegen~$d(x/y) = (y\,dx-x\,dy)/y^2$ hat dieser eine
doppelte Polstelle und keine Nullstellen.\end{ex}

\begin{ex}Auf~$X = \PP^2$ mit Koordinaten~$x$,~$y$ und~$z$ gilt~$\omega_X \cong
\O(-3)$. Ein rationaler Schnitt von~$\omega_X$ ist nämlich
\[ d(x/z) \wedge d(y/z) =
  \frac{z\,dx - x\,dz}{z^2} \wedge \frac{z\,dy - y\,dz}{z^2} =
  \frac{z\,dx\,dy - y\,dx\,dz + x\,dy\,dz}{z^3}. \]\end{ex}

\begin{fact}Es ist~$H^2(X,\omega_X)$ eindimensional und
für~$i = 0,1,2$ induziert das Cup-Produkt für jedes Geradenbündel~$\L$ eine
nicht ausgeartete Bilinearform.
\[ H^i(X,\L) \times H^{2-i}(X,\omega_X \otimes \L^\vee) \lra
  H^2(X,\omega_X) \stackrel{\cong}{\lra} \CC \]
\end{fact}

XXX Bedeutung, Intuition, Poincaré-Dualität, \ldots

\begin{cor}Für jedes Geradenbündel~$\L$ gilt~$\chi(\L) = \chi(\omega_X \otimes
\L^\vee)$. Insbesondere gilt~$\chi(\O_X) = \chi(\omega_X)$.\end{cor}
\begin{proof}Es gilt~$\dim H^i(X,\L) = \dim H^{2-i}(X,\omega_X \otimes \L^\vee)$,
und die Vorzeichen passen.
\end{proof}

\begin{thm}[Riemann--Roch für Flächen]
Sei~$\L$ ein Geradenbündel auf~$X$. Dann gilt
\[ \chi(\L) = \chi(\O_X) + \tfrac{1}{2} \cdot \bigl((\L \cdot \L) - (\L \cdot \omega_X)\bigr). \]
\end{thm}

\begin{proof}Die Behauptung folgt durch Umstellen der Gleichung
\begin{align*}
  -(\L \cdot \L) + (\L \cdot \omega_X)
  &= (\L^\vee \cdot \L) + (\L^\vee \cdot \omega_X^\vee) \\
  &= (\L^\vee \cdot (\L \otimes \omega_X^\vee)) \\
  &= \chi(\O_X) - \chi(\L) - \chi(\omega_X \otimes \L^\vee) + \chi(\omega_X) \\
  &= \chi(\O_X) - \chi(\L) - \chi(\L) + \chi(\O_X) \\
  &= 2 \cdot (\chi(\O_X) - \chi(\L)). \qedhere
\end{align*}
\end{proof}

\begin{rem}Angewendet auf das zu einem Divisor assoziierte
Geradenbündel~$\O_X(D)$ lautet der Satz von Riemann--Roch wie folgt:
\[ h^0(\O_X(D)) - h^1(\O_X(D)) + h^0(\O_X(K-D)) =
  1 - h^1(\O_X) + p_g + \tfrac{1}{2} \cdot D(D-K_X). \]
Dabei ist~$p_g := h^0(\O_X(K_X)) = h^0(\omega_X)$ das \emph{geometrische
Geschlecht} von~$X$. Ferner ist~$q := h^1(\O_X)$ auch als \emph{Irregularität}
von~$X$ bekannt; aus Hodgetheorie folgt, dass~$2q = b_1 = \dim_\CC H^1(X,\CC)$.
\end{rem}

\begin{fact}[Noethers Formel]
Es gilt~$\chi(\O_X) = \frac{1}{12} \cdot (K_X^2 +
\chi_\mathrm{top}(X))$.
\end{fact}

\begin{cor}[Formel für das Geschlecht]
Sei~$C$ eine irreduzible Kurve auf~$X$. Für ihr Geschlecht $g(C) :=
\dim_\CC H^1(C,\O_C)$ gilt
\[ g(C) = 1 + \tfrac{1}{2} \cdot C(C+K_X). \]
\end{cor}
\begin{proof}\[ g(C) = h^1(\O_C) = 1 - \chi(\O_C) = 1 - (\chi(\O_X) -
\chi(\O_X(-C))) = 1 + \tfrac{1}{2} \cdot C(C+K). \qedhere \]
\end{proof}

\begin{prop}[Adjunktionsformel]
Sei~$C$ eine glatte Kurve auf~$X$. Dann gilt \[ \O_X(K_X+C)|_C \cong \omega_C. \]
\end{prop}
\begin{proof}Es gibt die kurze exakte Sequenz
\[ 0 \lra \N_{C/X}^\vee \lra \Omega^1_X|_C \lra \Omega^1_C \lra 0. \]
Dabei ist das Konormalenbündel durch~$\O_X(-C)|_C$ gegeben. Durch Übergang zu
den Determinantenbündeln folgt~$\Lambda^2\Omega^1_X|_C \cong
\O_X(-C)|_C \otimes_{\O_C} \omega_C$ und somit~$\omega_C \cong \omega_X|_C
\otimes_{\O_C} \O_X(C)|_C \cong \O_X(K_X+C)|_C$.
\end{proof}

%\begin{rem}Die Formel für das Geschlecht folgt mit dem Satz von Riemann--Roch
%auch aus der Adjunktionsformel:
%\[ g(C) = h^1(\O_C) = h^0(\omega_C) = \chi(\omega_C) - 1 =
%  \chi(\O_X(K_X+C)|_C) - 1 =
%  \deg \O_X(K_X+C)|_C - 1. \]
%\end{rem}

\end{document}

Einschränkung von Divisoren auf offene Teilmengen

Übergangsabbildungen
